{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"./ListMetricsAggregator","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":15,"column":0},"end":{"line":15,"column":60}}],"key":"+LsZXRWRdDHi7URH4twavK8owRs=","exportNames":["*"],"imports":1}},{"name":"invariant","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":17,"column":18},"end":{"line":17,"column":38}}],"key":"oQpL0Es3H146KnQH9ygFeHrzVP4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){'use strict';function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return f}});var t=e(r(d[0])),n=e(r(d[1])),s=e(r(d[2]));r(d[3]);var l=r(d[4]),o=(function(){return(0,s.default)(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewAreaCoveragePercentThreshold:0};(0,n.default)(this,e),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=t},[{key:\"dispose\",value:function(){this._timers.forEach(clearTimeout)}},{key:\"computeViewableItems\",value:function(e,t,n,s,o){var h=e.getItemCount(e.data),c=this._config,f=c.itemVisiblePercentThreshold,v=c.viewAreaCoveragePercentThreshold,_=null!=v,w=_?v:f;l(null!=w&&null!=f!=(null!=v),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var b=[];if(0===h)return b;var I=-1,y=o||{first:0,last:h-1},p=y.first,M=y.last;if(M>=h)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:o,itemCount:h})),[];for(var C=p;C<=M;C++){var T=s.getCellMetrics(C,e);if(T){var k=Math.floor(T.offset-t),V=Math.floor(k+T.length);if(k<n&&V>0)I=C,u(_,w,k,V,n,T.length)&&b.push(C);else if(I>=0)break}}return b}},{key:\"onUpdate\",value:function(e,t,n,s,l,o,u){var h=e.getItemCount(e.data);if((!this._config.waitForInteraction||this._hasInteracted)&&0!==h&&s.getCellMetrics(0,e)){var c=[];if(h&&(c=this.computeViewableItems(e,t,n,s,u)),this._viewableIndices.length!==c.length||!this._viewableIndices.every((e,t)=>e===c[t]))if(this._viewableIndices=c,this._config.minimumViewTime){var f=setTimeout(()=>{this._timers.delete(f),this._onUpdateSync(e,c,o,l)},this._config.minimumViewTime);this._timers.add(f)}else this._onUpdateSync(e,c,o,l)}}},{key:\"resetViewableIndices\",value:function(){this._viewableIndices=[]}},{key:\"recordInteraction\",value:function(){this._hasInteracted=!0}},{key:\"_onUpdateSync\",value:function(e,n,s,l){n=n.filter(e=>this._viewableIndices.includes(e));var o=this._viewableItems,u=new Map(n.map(t=>{var n=l(t,!0,e);return[n.key,n]})),h=[];for(var c of u){var f=(0,t.default)(c,2),v=f[0],_=f[1];o.has(v)||h.push(_)}for(var w of o){var b=(0,t.default)(w,2),I=b[0],y=b[1];u.has(I)||h.push({...y,isViewable:!1})}h.length>0&&(this._viewableItems=u,s({viewableItems:Array.from(u.values()),changed:h,viewabilityConfig:this._config}))}}])})();function u(e,t,n,s,l,o){if(c(n,s,l))return!0;var u=h(n,s,l);return 100*(e?u/l:u/o)>=t}function h(e,t,n){var s=Math.min(t,n)-Math.max(e,0);return Math.max(0,s)}function c(e,t,n){return e>=0&&t<=n&&t>e}var f=o});","lineCount":1,"map":[[1,29,11,0],[1,42,11,13],[1,51,11,13,"_interopDefault"],[1,53,11,13,"e"],[1,56,11,13],[1,63,11,13,"e"],[1,68,11,13,"__esModule"],[1,79,11,13,"e"],[1,81,11,13],[1,82,11,13,"default"],[1,90,11,13,"e"],[1,92,11,13],[1,93,11,13,"Object"],[1,100,11,13,"defineProperty"],[1,115,11,13,"_e"],[1,118,11,13],[1,132,11,13,"value"],[1,139,11,13],[1,143,352,0,"Object"],[1,150,352,0,"defineProperty"],[1,165,352,0,"_e"],[1,168,352,0],[1,179,352,0,"enumerable"],[1,191,352,0],[1,193,352,0,"get"],[1,197,352,0],[1,215,352,0,"_default"],[1,216,352,0],[1,220,352,33],[1,224,352,33,"_slicedToArray"],[1,226,352,33,"_interopDefault"],[1,228,352,33,"r"],[1,230,352,33,"d"],[1,232,352,33],[1,237,352,33,"_classCallCheck"],[1,239,352,33,"_interopDefault"],[1,241,352,33,"r"],[1,243,352,33,"d"],[1,245,352,33],[1,250,352,33,"_createClass"],[1,252,352,33,"_interopDefault"],[1,254,352,33,"r"],[1,256,352,33,"d"],[1,258,352,33],[1,263,15,0,"r"],[1,265,15,0,"d"],[1,267,15,0],[1,271,17,0],[1,275,17,6,"invariant"],[1,277,17,18,"require"],[1,279,17,25,"d"],[1,281,17,25],[1,285,82,6,"ViewabilityHelper"],[1,288,82,23],[1,299,93,3],[1,308,93,3,"_createClass"],[1,310,93,3,"default"],[1,319,89,2],[1,328,89,2,"ViewabilityHelper"],[1,332,91,4],[1,336,90,4,"config"],[1,338,90,29,"arguments"],[1,348,90,29,"length"],[1,355,90,29],[1,363,90,29,"undefined"],[1,367,90,29,"arguments"],[1,377,90,29],[1,380,90,29,"arguments"],[1,390,90,29],[1,393,90,32],[1,394,90,33,"viewAreaCoveragePercentThreshold"],[1,427,90,67],[1,431,90,69],[1,433,90,69,"_classCallCheck"],[1,435,90,69,"default"],[1,444,90,69,"this"],[1,449,90,69,"ViewabilityHelper"],[1,452,90,69,"this"],[1,457,84,2,"_hasInteracted"],[1,473,84,28],[1,475,84,33,"this"],[1,480,85,2,"_timers"],[1,488,85,25],[1,492,85,29,"Set"],[1,496,85,34,"this"],[1,501,86,2,"_viewableIndices"],[1,518,86,36],[1,521,86,38,"this"],[1,526,87,2,"_viewableItems"],[1,541,87,43],[1,545,87,47,"Map"],[1,549,92,4,"this"],[1,554,92,9,"_config"],[1,562,92,19,"config"],[1,563,93,2],[1,565,93,3],[1,567,93,3,"key"],[1,571,93,3],[1,581,93,3,"value"],[1,587,98,2],[1,598,102,4,"this"],[1,603,102,9,"_timers"],[1,611,102,17,"forEach"],[1,619,102,25,"clearTimeout"],[1,632,103,2],[1,635,103,3],[1,636,103,3,"key"],[1,640,103,3],[1,663,103,3,"value"],[1,669,108,2],[1,678,109,4,"props"],[1,680,110,4,"scrollOffset"],[1,682,111,4,"viewportHeight"],[1,684,112,4,"listMetrics"],[1,686,114,4,"renderRange"],[1,689,120,4],[1,693,120,10,"itemCount"],[1,695,120,22,"props"],[1,697,120,28,"getItemCount"],[1,710,120,41,"props"],[1,712,120,47,"data"],[1,718,121,4,"_this$_config"],[1,720,122,6,"this"],[1,725,122,11,"_config"],[1,733,121,11,"itemVisiblePercentThreshold"],[1,735,121,38,"_this$_config"],[1,737,121,11,"itemVisiblePercentThreshold"],[1,765,121,40,"viewAreaCoveragePercentThreshold"],[1,767,121,72,"_this$_config"],[1,769,121,40,"viewAreaCoveragePercentThreshold"],[1,802,123,10,"viewAreaMode"],[1,804,123,61],[1,810,123,25,"viewAreaCoveragePercentThreshold"],[1,812,124,10,"viewablePercentThreshold"],[1,814,124,37,"viewAreaMode"],[1,816,125,8,"viewAreaCoveragePercentThreshold"],[1,818,126,8,"itemVisiblePercentThreshold"],[1,820,127,4,"invariant"],[1,822,128,34],[1,828,128,6,"viewablePercentThreshold"],[1,831,129,40],[1,837,129,9,"itemVisiblePercentThreshold"],[1,841,130,47],[1,847,130,11,"viewAreaCoveragePercentThreshold"],[1,850,131,6],[1,941,133,4],[1,945,133,10,"viewableIndices"],[1,947,133,28],[1,950,134,4],[1,953,134,22],[1,957,134,8,"itemCount"],[1,959,135,6],[1,966,135,13,"viewableIndices"],[1,968,137,4],[1,972,137,8,"firstVisible"],[1,975,137,20],[1,977,138,4,"_ref"],[1,979,138,26,"renderRange"],[1,982,138,41],[1,983,138,42,"first"],[1,989,138,49],[1,991,138,52,"last"],[1,996,138,58,"itemCount"],[1,998,138,70],[1,1001,138,11,"first"],[1,1003,138,16,"_ref"],[1,1005,138,11,"first"],[1,1011,138,18,"last"],[1,1013,138,22,"_ref"],[1,1015,138,18,"last"],[1,1020,139,4],[1,1023,139,8,"last"],[1,1026,139,16,"itemCount"],[1,1028,144,6],[1,1035,140,6,"console"],[1,1043,140,14,"warn"],[1,1048,141,8],[1,1094,142,10,"JSON"],[1,1099,142,15,"stringify"],[1,1109,142,25],[1,1110,142,26,"renderRange"],[1,1124,142,39,"itemCount"],[1,1139,144,13],[1,1142,146,4],[1,1146,146,9],[1,1150,146,13,"idx"],[1,1152,146,19,"first"],[1,1154,146,26,"idx"],[1,1157,146,33,"last"],[1,1159,146,39,"idx"],[1,1163,146,46],[1,1164,147,6],[1,1168,147,12,"metrics"],[1,1170,147,22,"listMetrics"],[1,1172,147,34,"getCellMetrics"],[1,1187,147,49,"idx"],[1,1189,147,54,"props"],[1,1192,148,6],[1,1195,148,11,"metrics"],[1,1197,148,6],[1,1198,151,6],[1,1202,151,12,"top"],[1,1204,151,18,"Math"],[1,1209,151,23,"floor"],[1,1215,151,29,"metrics"],[1,1217,151,37,"offset"],[1,1224,151,46,"scrollOffset"],[1,1227,152,12,"bottom"],[1,1229,152,21,"Math"],[1,1234,152,26,"floor"],[1,1240,152,32,"top"],[1,1242,152,38,"metrics"],[1,1244,152,46,"length"],[1,1252,154,6],[1,1255,154,10,"top"],[1,1257,154,16,"viewportHeight"],[1,1260,154,34,"bottom"],[1,1262,154,43],[1,1264,155,8,"firstVisible"],[1,1266,155,23,"idx"],[1,1268,157,10,"_isViewable"],[1,1270,158,12,"viewAreaMode"],[1,1272,159,12,"viewablePercentThreshold"],[1,1274,160,12,"top"],[1,1276,161,12,"bottom"],[1,1278,162,12,"viewportHeight"],[1,1280,163,12,"metrics"],[1,1282,163,20,"length"],[1,1291,166,10,"viewableIndices"],[1,1293,166,26,"push"],[1,1298,166,31,"idx"],[1,1306,168,13],[1,1309,168,17,"firstVisible"],[1,1312,168,33],[1,1314,169,8],[1,1319,150,6],[1,1320,171,4],[1,1321,172,4],[1,1328,172,11,"viewableIndices"],[1,1329,173,2],[1,1332,173,3],[1,1333,173,3,"key"],[1,1337,173,3],[1,1348,173,3,"value"],[1,1354,179,2],[1,1363,180,4,"props"],[1,1365,181,4,"scrollOffset"],[1,1367,182,4,"viewportHeight"],[1,1369,183,4,"listMetrics"],[1,1371,184,4,"createViewToken"],[1,1373,189,4,"onViewableItemsChanged"],[1,1375,195,4,"renderRange"],[1,1378,201,4],[1,1382,201,10,"itemCount"],[1,1384,201,22,"props"],[1,1386,201,28,"getItemCount"],[1,1399,201,41,"props"],[1,1401,201,47,"data"],[1,1407,202,4],[1,1412,203,7,"this"],[1,1417,203,12,"_config"],[1,1425,203,20,"waitForInteraction"],[1,1445,203,43,"this"],[1,1450,203,48,"_hasInteracted"],[1,1467,204,20],[1,1471,204,6,"itemCount"],[1,1474,205,7,"listMetrics"],[1,1476,205,19,"getCellMetrics"],[1,1491,205,34],[1,1493,205,37,"props"],[1,1496,202,4],[1,1497,209,4],[1,1501,209,8,"viewableIndices"],[1,1503,209,41],[1,1506,219,4],[1,1509,210,8,"itemCount"],[1,1513,211,6,"viewableIndices"],[1,1515,211,24,"this"],[1,1520,211,29,"computeViewableItems"],[1,1541,212,8,"props"],[1,1543,213,8,"scrollOffset"],[1,1545,214,8,"viewportHeight"],[1,1547,215,8,"listMetrics"],[1,1549,216,8,"renderRange"],[1,1553,220,6,"this"],[1,1558,220,11,"_viewableIndices"],[1,1575,220,28,"length"],[1,1584,220,39,"viewableIndices"],[1,1586,220,55,"length"],[1,1595,221,6,"this"],[1,1600,221,11,"_viewableIndices"],[1,1617,221,28,"every"],[1,1623,221,34],[1,1624,221,35,"v"],[1,1626,221,38,"ii"],[1,1630,221,45,"v"],[1,1634,221,51,"viewableIndices"],[1,1636,221,67,"ii"],[1,1640,228,4],[1,1643,227,4,"this"],[1,1648,227,9,"_viewableIndices"],[1,1665,227,28,"viewableIndices"],[1,1667,228,8,"this"],[1,1672,228,13,"_config"],[1,1680,228,21,"minimumViewTime"],[1,1696,228,38],[1,1697,229,6],[1,1701,229,12,"handle"],[1,1703,229,32,"setTimeout"],[1,1714,229,43],[1,1719,233,8,"this"],[1,1724,233,13,"_timers"],[1,1732,233,21,"delete"],[1,1739,233,28,"handle"],[1,1742,234,8,"this"],[1,1747,234,13,"_onUpdateSync"],[1,1761,235,10,"props"],[1,1763,236,10,"viewableIndices"],[1,1765,237,10,"onViewableItemsChanged"],[1,1767,238,10,"createViewToken"],[1,1771,240,9,"this"],[1,1776,240,14,"_config"],[1,1784,240,22,"minimumViewTime"],[1,1801,244,6,"this"],[1,1806,244,11,"_timers"],[1,1814,244,19,"add"],[1,1818,244,23,"handle"],[1,1820,245,4],[1,1826,246,6,"this"],[1,1831,246,11,"_onUpdateSync"],[1,1845,247,8,"props"],[1,1847,248,8,"viewableIndices"],[1,1849,249,8,"onViewableItemsChanged"],[1,1851,250,8,"createViewToken"],[1,1853,208,4],[1,1854,253,2],[1,1857,253,3],[1,1858,253,3,"key"],[1,1862,253,3],[1,1885,253,3,"value"],[1,1891,258,2],[1,1902,259,4,"this"],[1,1907,259,9,"_viewableIndices"],[1,1924,259,28],[1,1926,260,2],[1,1929,260,3],[1,1930,260,3,"key"],[1,1934,260,3],[1,1954,260,3,"value"],[1,1960,265,2],[1,1971,266,4,"this"],[1,1976,266,9,"_hasInteracted"],[1,1992,266,26],[1,1993,267,2],[1,1996,267,3],[1,1997,267,3,"key"],[1,2001,267,3],[1,2017,267,3,"value"],[1,2023,269,2],[1,2032,270,4,"props"],[1,2034,271,4,"viewableIndicesToCheck"],[1,2036,272,4,"onViewableItemsChanged"],[1,2038,277,4,"createViewToken"],[1,2041,284,4,"viewableIndicesToCheck"],[1,2043,284,29,"viewableIndicesToCheck"],[1,2045,284,52,"filter"],[1,2052,284,59,"ii"],[1,2055,285,6,"this"],[1,2060,285,11,"_viewableIndices"],[1,2077,285,28,"includes"],[1,2086,285,37,"ii"],[1,2090,287,4],[1,2094,287,10,"prevItems"],[1,2096,287,22,"this"],[1,2101,287,27,"_viewableItems"],[1,2116,288,10,"nextItems"],[1,2118,288,22],[1,2122,288,26,"Map"],[1,2126,289,6,"viewableIndicesToCheck"],[1,2128,289,29,"map"],[1,2132,289,33,"ii"],[1,2136,290,8],[1,2140,290,14,"viewable"],[1,2142,290,25,"createViewToken"],[1,2144,290,41,"ii"],[1,2147,290,45],[1,2149,290,51,"props"],[1,2152,291,8],[1,2158,291,15],[1,2159,291,16,"viewable"],[1,2161,291,25,"key"],[1,2165,291,30,"viewable"],[1,2171,295,10,"changed"],[1,2173,295,20],[1,2176,296,4],[1,2184,296,4,"_ref2"],[1,2189,296,34,"nextItems"],[1,2191,296,45],[1,2196,296,45,"_ref3"],[1,2199,296,45],[1,2201,296,45,"_slicedToArray"],[1,2203,296,45,"default"],[1,2212,296,45,"_ref2"],[1,2214,296,45],[1,2217,296,16,"key"],[1,2219,296,19,"_ref3"],[1,2221,296,19],[1,2224,296,21,"viewable"],[1,2226,296,29,"_ref3"],[1,2228,296,29],[1,2231,297,11,"prevItems"],[1,2233,297,21,"has"],[1,2237,297,25,"key"],[1,2241,298,8,"changed"],[1,2243,298,16,"push"],[1,2248,298,21,"viewable"],[1,2250,300,4],[1,2251,301,4],[1,2259,301,4,"_ref4"],[1,2264,301,34,"prevItems"],[1,2266,301,45],[1,2271,301,45,"_ref5"],[1,2274,301,45],[1,2276,301,45,"_slicedToArray"],[1,2278,301,45,"default"],[1,2287,301,45,"_ref4"],[1,2289,301,45],[1,2292,301,16,"key"],[1,2294,301,19,"_ref5"],[1,2296,301,19],[1,2299,301,21,"viewable"],[1,2301,301,29,"_ref5"],[1,2303,301,29],[1,2306,302,11,"nextItems"],[1,2308,302,21,"has"],[1,2312,302,25,"key"],[1,2316,303,8,"changed"],[1,2318,303,16,"push"],[1,2323,303,21],[1,2327,303,25,"viewable"],[1,2329,303,35,"isViewable"],[1,2341,303,47],[1,2344,305,4],[1,2345,306,8,"changed"],[1,2347,306,16,"length"],[1,2354,306,25],[1,2358,307,6,"this"],[1,2363,307,11,"_viewableItems"],[1,2378,307,28,"nextItems"],[1,2380,308,6,"onViewableItemsChanged"],[1,2382,308,29],[1,2383,309,8,"viewableItems"],[1,2397,309,23,"Array"],[1,2403,309,29,"from"],[1,2408,309,34,"nextItems"],[1,2410,309,44,"values"],[1,2420,310,8,"changed"],[1,2430,311,8,"viewabilityConfig"],[1,2448,311,27,"this"],[1,2453,311,32,"_config"],[1,2463,314,2],[1,2467,314,3],[1,2469,82,23],[1,2472,317,0],[1,2481,317,9,"_isViewable"],[1,2483,318,2,"viewAreaMode"],[1,2485,319,2,"viewablePercentThreshold"],[1,2487,320,2,"top"],[1,2489,321,2,"bottom"],[1,2491,322,2,"viewportHeight"],[1,2493,323,2,"itemLength"],[1,2496,325,2],[1,2499,325,6,"_isEntirelyVisible"],[1,2501,325,25,"top"],[1,2503,325,30,"bottom"],[1,2505,325,38,"viewportHeight"],[1,2508,326,4],[1,2515,326,11],[1,2517,328,4],[1,2521,328,10,"pixels"],[1,2523,328,19,"_getPixelsVisible"],[1,2525,328,37,"top"],[1,2527,328,42,"bottom"],[1,2529,328,50,"viewportHeight"],[1,2532,331,4],[1,2539,330,6],[1,2544,330,13,"viewAreaMode"],[1,2546,330,28,"pixels"],[1,2548,330,37,"viewportHeight"],[1,2550,330,54,"pixels"],[1,2552,330,63,"itemLength"],[1,2556,331,22,"viewablePercentThreshold"],[1,2557,333,0],[1,2558,335,0],[1,2567,335,9,"_getPixelsVisible"],[1,2569,336,2,"top"],[1,2571,337,2,"bottom"],[1,2573,338,2,"viewportHeight"],[1,2576,340,2],[1,2580,340,8,"visibleHeight"],[1,2582,340,24,"Math"],[1,2587,340,29,"min"],[1,2591,340,33,"bottom"],[1,2593,340,41,"viewportHeight"],[1,2596,340,59,"Math"],[1,2601,340,64,"max"],[1,2605,340,68,"top"],[1,2607,340,73],[1,2610,341,2],[1,2617,341,9,"Math"],[1,2622,341,14,"max"],[1,2626,341,18],[1,2628,341,21,"visibleHeight"],[1,2630,342,0],[1,2631,344,0],[1,2640,344,9,"_isEntirelyVisible"],[1,2642,345,2,"top"],[1,2644,346,2,"bottom"],[1,2646,347,2,"viewportHeight"],[1,2649,349,2],[1,2656,349,9,"top"],[1,2659,349,16],[1,2662,349,21,"bottom"],[1,2665,349,31,"viewportHeight"],[1,2668,349,49,"bottom"],[1,2670,349,58,"top"],[1,2671,350,0],[1,2672,352,0],[1,2676,352,0,"_default"],[1,2678,352,15,"ViewabilityHelper"],[1,2679,352,33],[1,2682]],"functionMap":{"names":["<global>","ViewabilityHelper","constructor","dispose","computeViewableItems","onUpdate","_viewableIndices.every$argument_0","setTimeout$argument_0","resetViewableIndices","recordInteraction","_onUpdateSync","viewableIndicesToCheck.filter$argument_0","viewableIndicesToCheck.map$argument_0","_isViewable","_getPixelsVisible","_isEntirelyVisible"],"mappings":"AAA;ACiF;ECO;GDI;EEK;GFK;EGK;GHiE;EIM;kCC0C,oCD;2CEQ;OFW;GJa;EOK;GPE;EQK;GRE;ESE;2DCe;wCDC;iCEI;OFG;GTsB;CDC;AaE;CbgB;AcE;CdO;AeE;CfM"},"hasCjsExports":false},"type":"js/module"}]}